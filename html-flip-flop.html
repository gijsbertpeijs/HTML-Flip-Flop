<!DOCTYPE html>
<html>
    <head>
        <title>HTML Flip Flop</title>
        <script type="text/javascript">
            var img = new Image();
			var img2 = new Image();
			var ctx;
			
			var scale = 1;
			var scaleInc = -0.1;
			
            function init() {
				ctx = document.getElementById('myCanvas').getContext('2d');
                img.src = "images/ani1.gif";
				img2.src = "images/C64.gif";
				setTimeout(draw,10);
            }

			function flip(){
 				ctx.save();
				ctx.clearRect(0,0,60,60);
				ctx.translate(30,0); // to get it in the origin
				scale += scaleInc;
				scale = roundNumber(scale,1); // round number, otherwise you end up with -0.9999999 or something!
				ctx.scale(scale,1);
				ctx.translate(-30,0); //put it back
				ctx.drawImage(img,0,0);
				ctx.restore();
				
				if (scale < 1) {
					if (scale == 0) {
						// switch the image source (back/front)
						var swapImage = img.src;
						img.src = img2.src; // flip image source
						img2.src = swapImage;
						scaleInc = scaleInc * -1; 
					}
					setTimeout(flip, 8); // call myself with slight delay
				} else {
					scaleInc = scaleInc * -1; // restore scaleInc for the next flip
				}
            }
            
			function draw(){
                ctx.drawImage(img,0,0);
				ctx.drawImage(img,300,300);
            }
			
			function roundNumber(number, digits) {
				var multiple = Math.pow(10, digits);
				var rndedNum = Math.round(number * multiple) / multiple;
				return rndedNum;
			}

        </script>
    </head>
    <body onload="init()">
        <canvas width="400" height="400" id="myCanvas">
			Oops, your browser does not support Canvas. Time to upgrade buddy.
		</canvas>
		<button onclick="flip()">Flip</button>
    </body>
</html>
